{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.acme.com/email/event-extracted/1.0.0",
  "type": "object",
  "title": "Event Extracted from Email",
  "description": "Structured event extracted from email content",
  "additionalProperties": false,
  "properties": {
    "@context": {
      "type": "object",
      "description": "JSON-LD context for semantic meaning"
    },
    "extraction_id": {
      "type": "string",
      "description": "Unique extraction ID"
    },
    "source_message_id": {
      "type": "string",
      "description": "Original email message ID"
    },
    "event_type": {
      "type": "string",
      "description": "Type of event extracted",
      "enum": [
        "campaign_request",
        "inventory_alert",
        "budget_approval",
        "product_launch",
        "pricing_change",
        "customer_feedback",
        "other"
      ]
    },
    "ontology_type": {
      "type": "string",
      "description": "Ontology concept this event maps to"
    },
    "extracted_data": {
      "type": "object",
      "description": "Structured data extracted from email"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Confidence in extraction accuracy"
    },
    "target_stream": {
      "type": "string",
      "description": "Target Redis stream for routing"
    },
    "validation": {
      "type": "object",
      "properties": {
        "passed": { "type": "boolean" },
        "errors": { "type": "array", "items": { "type": "string" } },
        "warnings": { "type": "array", "items": { "type": "string" } }
      }
    },
    "extraction_metadata": {
      "type": "object",
      "properties": {
        "extraction_time_ms": { "type": "integer" },
        "llm_model": { "type": "string" },
        "prompt_tokens": { "type": "integer" },
        "completion_tokens": { "type": "integer" }
      }
    }
  },
  "required": [
    "@context",
    "extraction_id",
    "source_message_id",
    "event_type",
    "extracted_data",
    "confidence"
  ]
}
