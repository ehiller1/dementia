{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.acme.com/marketing/campaign-intent/1.0.0",
  "type": "object",
  "title": "Campaign Intent",
  "description": "Machine-readable campaign intent derived from marketing briefs/promotions",
  "additionalProperties": false,
  "properties": {
    "@context": {
      "type": "object",
      "description": "JSON-LD context for semantic meaning"
    },
    "campaign": {
      "type": "object",
      "description": "Campaign identification and metadata",
      "properties": {
        "name": {
          "type": "string",
          "description": "Campaign name or identifier"
        },
        "type": {
          "type": "string",
          "enum": [
            "product_launch",
            "seasonal_promotion",
            "brand_awareness",
            "price_promotion",
            "inventory_clearance",
            "loyalty_campaign",
            "new_customer_acquisition"
          ],
          "description": "Type of campaign"
        },
        "brief": {
          "type": "string",
          "description": "Original campaign brief or description"
        },
        "objectives": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Campaign objectives"
        }
      },
      "required": ["name", "type"]
    },
    "who": {
      "type": "object",
      "description": "Target audience definition",
      "properties": {
        "segments": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Customer segments to target"
        },
        "demographics": {
          "type": "object",
          "properties": {
            "age_range": {
              "type": "string",
              "pattern": "^[0-9]+-[0-9]+$"
            },
            "income_level": {
              "type": "string",
              "enum": ["low", "medium", "high", "premium"]
            },
            "location": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "behavioral": {
          "type": "object",
          "properties": {
            "purchase_frequency": {
              "type": "string",
              "enum": ["first_time", "occasional", "frequent", "loyal"]
            },
            "category_affinity": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },
      "required": ["segments"]
    },
    "what": {
      "type": "object",
      "description": "Products and offers",
      "properties": {
        "products": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "sku": {
                "type": "string",
                "pattern": "^[A-Z]{3}-[0-9]{4}$"
              },
              "category": {
                "type": "string"
              },
              "brand": {
                "type": "string"
              }
            },
            "required": ["sku"]
          },
          "description": "Products to promote"
        },
        "offer": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "percentage_discount",
                "fixed_amount_discount",
                "bogo",
                "bundle",
                "free_shipping",
                "gift_with_purchase"
              ]
            },
            "value": {
              "type": "number",
              "description": "Discount value (percentage or amount)"
            },
            "minimum_purchase": {
              "type": "number",
              "description": "Minimum purchase amount for offer"
            },
            "max_uses_per_customer": {
              "type": "integer"
            }
          },
          "required": ["type"]
        },
        "messaging": {
          "type": "object",
          "properties": {
            "headline": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "call_to_action": {
              "type": "string"
            }
          }
        }
      },
      "required": ["products"]
    },
    "where": {
      "type": "object",
      "description": "Channels and placements",
      "properties": {
        "channels": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "onsite_search",
              "onsite_display",
              "offsite_display",
              "email",
              "social_media",
              "video",
              "audio",
              "mobile_push",
              "in_store"
            ]
          },
          "description": "Media channels to use"
        },
        "retailers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Retailers to activate (for RMN campaigns)"
        },
        "placements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string"
              },
              "priority": {
                "type": "string",
                "enum": ["high", "medium", "low"]
              }
            }
          }
        }
      },
      "required": ["channels"]
    },
    "when": {
      "type": "object",
      "description": "Timing and duration",
      "properties": {
        "start_date": {
          "type": "string",
          "format": "date-time",
          "description": "Campaign start date"
        },
        "end_date": {
          "type": "string",
          "format": "date-time",
          "description": "Campaign end date"
        },
        "duration_days": {
          "type": "integer",
          "minimum": 1,
          "description": "Campaign duration in days"
        },
        "dayparting": {
          "type": "object",
          "properties": {
            "days_of_week": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]
              }
            },
            "hours": {
              "type": "string",
              "pattern": "^[0-9]{2}:[0-9]{2}-[0-9]{2}:[0-9]{2}$",
              "description": "Time range (HH:MM-HH:MM)"
            }
          }
        },
        "seasonality": {
          "type": "string",
          "enum": [
            "holiday",
            "back_to_school",
            "summer",
            "winter",
            "spring",
            "fall",
            "year_round"
          ]
        }
      },
      "required": ["start_date", "end_date"]
    },
    "targeted_lift": {
      "type": "object",
      "description": "Expected performance targets",
      "properties": {
        "kpis": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "metric": {
                "type": "string",
                "enum": [
                  "sales_volume",
                  "revenue",
                  "conversion_rate",
                  "reach",
                  "impressions",
                  "click_through_rate",
                  "return_on_ad_spend",
                  "new_customers",
                  "customer_lifetime_value"
                ]
              },
              "target_value": {
                "type": "number"
              },
              "target_unit": {
                "type": "string"
              },
              "baseline_value": {
                "type": "number",
                "description": "Current/historical baseline"
              },
              "lift_percentage": {
                "type": "number",
                "description": "Expected lift percentage"
              }
            },
            "required": ["metric", "target_value"]
          }
        },
        "budget": {
          "type": "object",
          "properties": {
            "total": {
              "type": "number",
              "description": "Total campaign budget"
            },
            "currency": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            },
            "allocation": {
              "type": "object",
              "description": "Budget allocation by channel",
              "additionalProperties": {
                "type": "number"
              }
            }
          },
          "required": ["total", "currency"]
        },
        "constraints": {
          "type": "object",
          "properties": {
            "max_discount_percent": {
              "type": "number"
            },
            "min_margin_percent": {
              "type": "number"
            },
            "inventory_availability": {
              "type": "boolean"
            },
            "compliance_flags": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },
      "required": ["kpis"]
    }
  },
  "required": [
    "@context",
    "campaign",
    "who",
    "what",
    "where",
    "when",
    "targeted_lift"
  ]
}
