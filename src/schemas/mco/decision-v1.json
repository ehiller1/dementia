{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.acme.com/mco/decision/1.0.0",
  "type": "object",
  "title": "MCO Decision",
  "description": "Budget optimization decision with allocations and rationale",
  "additionalProperties": false,
  "properties": {
    "@context": {
      "type": "object",
      "description": "JSON-LD context for semantic meaning"
    },
    "decision_id": {
      "type": "string",
      "description": "Unique decision identifier"
    },
    "intent_id": {
      "type": "string",
      "description": "ID of the intent this decision responds to"
    },
    "subject": {
      "type": "object",
      "description": "Entity this decision applies to",
      "properties": {
        "entityType": {
          "type": "string"
        },
        "entityId": {
          "type": "string"
        }
      },
      "required": ["entityType", "entityId"]
    },
    "allocations": {
      "type": "array",
      "description": "Budget allocations by channel",
      "items": {
        "type": "object",
        "properties": {
          "channel": {
            "type": "string",
            "description": "Channel name"
          },
          "budget_usd": {
            "type": "number",
            "minimum": 0,
            "description": "Allocated budget in USD"
          },
          "budget_percentage": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Percentage of total budget"
          },
          "roas_target": {
            "type": "number",
            "minimum": 0,
            "description": "Target ROAS for this channel"
          },
          "roas_predicted": {
            "type": "number",
            "minimum": 0,
            "description": "Predicted ROAS"
          },
          "revenue_predicted_usd": {
            "type": "number",
            "minimum": 0,
            "description": "Predicted revenue in USD"
          }
        },
        "required": ["channel", "budget_usd"]
      }
    },
    "total_budget_usd": {
      "type": "number",
      "minimum": 0,
      "description": "Total budget across all channels"
    },
    "predicted_metrics": {
      "type": "object",
      "description": "Predicted performance metrics",
      "properties": {
        "total_revenue_usd": {
          "type": "number"
        },
        "total_roas": {
          "type": "number"
        },
        "total_reach": {
          "type": "integer"
        },
        "total_conversions": {
          "type": "integer"
        }
      }
    },
    "rationale": {
      "type": "string",
      "description": "Explanation of the optimization decision"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Confidence score for this decision"
    },
    "constraints_satisfied": {
      "type": "array",
      "description": "List of constraints that were satisfied",
      "items": {
        "type": "string"
      }
    },
    "constraints_violated": {
      "type": "array",
      "description": "List of constraints that could not be satisfied",
      "items": {
        "type": "string"
      }
    },
    "policies_applied": {
      "type": "array",
      "description": "Policy URIs that were applied",
      "items": {
        "type": "string"
      }
    },
    "optimization_method": {
      "type": "string",
      "description": "Method used for optimization",
      "enum": ["linear_programming", "gradient_descent", "heuristic", "ml_model", "rule_based"]
    }
  },
  "required": [
    "@context",
    "decision_id",
    "intent_id",
    "subject",
    "allocations",
    "total_budget_usd",
    "rationale",
    "confidence"
  ]
}
